<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF8"> 
    <script>
        var body = document.querySelector("body");
        fetch("defaultwidget.html")
            .then((res) => res.text())
            .then((original) => {
                // add defaultwidget.html
                var originalhtml = document.createElement("html");
                originalhtml.innerHTML = original;

                // add it's body
                document.body.innerHTML = originalhtml.querySelector("body").innerHTML

                // append it's js
                var originaljs = document.createElement("script");
                originaljs.innerHTML = originalhtml.querySelector("script").innerHTML
                document.head.appendChild(originaljs);

                // we're going to ignore it's css since we're replacing it anyway, if you want to use default just uncomment this
                // var originalcss = document.createElement("style");
                // originalcss.innerHTML = originalhtml.querySelector("style").innerHTML
                // document.head.appendChild(originalcss);

                const imported = new Event("imported");
                window.dispatchEvent(imported);
            })
            .catch((e) => console.error(e));

        window.addEventListener('imported', function() {
            // Css Load script from my site
            function addCss(fileName) {
                // adds css to head
                var link = document.createElement("link");
                link.type = "text/css";
                link.rel = "stylesheet";
                link.href = fileName;
                document.head.appendChild(link);
            }

            addCss("obsytwidget.css");

            // add a box around the title for the emojis
            var title = document.body.querySelector("#title");
            title.outerHTML = '<span id="titlebox"><p id="title">&nbsp;</p></span>'

            // add a box around the artist for the emojis
            var artist = document.body.querySelector("#artist");
            artist.outerHTML = '<span id="artistbox"><p id="artist">&nbsp;</p></span>'
        });

    </script>
</head>
<body>
</body>
</html>